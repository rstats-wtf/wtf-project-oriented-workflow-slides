{
  "hash": "77e1f7f049a976651f9e5cba33a2bd17",
  "result": {
    "markdown": "---\ntitle: \"Project oriented workflows\"\nauthor: \"Shannon Pileggi\"\nfooter:  \"[Project oriented workflows]()\"\nlogo: \"img/wtf-logo-square-transparent.png\"\nformat: \n  revealjs: \n    height: 900\n    width: 1600\n    theme: [night, slides.scss]\n    highlight-style: a11y\n    transition: fade\n    slide-number: true\n    chalkboard: true\neditor: visual\nexecute:\n  freeze: auto\n---\n\n\n\n# Getting started\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n## Licensing\n\n<br>\n\nThis work is licensed under a [Creative Commons Attribution-ShareAlike 4.0 International License](https://creativecommons.org/licenses/by-sa/4.0/) (CC BY-SA4.0).\n\n## Checklist\n\n<br>\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} R installed?\nPretty recent?\n\n¬†¬†¬†¬† Recommended R ‚â• 4.3.0\n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} RStudio installed?\n\n¬†¬†¬†¬† I'm on 2023.06.1 Build 524\n¬†¬†¬†¬† \n\n`<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} Packages?\n\n`install.packages(c(\"tidyverse\", \"rmarkdown\", \"usethis\", \"fs\", \"here\"))`\n\n\n## Resources\n\n<br>\n\nBook: [https://rstats.wtf](https://rstats.wtf/){target=\"_blank\"}\n\n\n\n\n## \n\n<br>\n\n::: {.center-x .r-fit-text}\nWhat [*Did*]{.important} They Forget <br> to Teach You?\n:::\n\n\n##  {background-image=\"img/everything-else.PNG\"}\n\n## Learning objectives\n\n1. Establish the concept of the project as the basic organizational unit of work.\n\n2. Apply best practices in and leverage benefits of working in RStudio projects, including\n\n* Creating robust file paths that travel well in time and space.\n\n* Constructing human and machine readable file names that sort nicely.\n\n* Differentiating workflow elements, analysis inputs, and analysis outputs in project structure to create navigable programming interfaces.\n\n* Restarting R frequently, with a blank slate.\n\n\n# Be organized\n\n##  {background-image=\"img/deep_thoughts.PNG\"}\n\n## Be organized as you go, <br> not \"tomorrow\"\n\n::: columns\n::: {.column width=\"50%\"}\nDon't fret over past mistakes.\n\n![](img/beer-house.png)\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column .fragment width=\"46%\"}\nRaise the bar for new work.\n\n![](img/beer-organized.png)\n:::\n:::\n\n## Be organized\n\n<br>\n\n<br>\n\n::: r-fit-text\nself-explaining `>>>` wordy, needy explainers\n:::\n\n## Be organized\n\n::: {.columns .v-center-container}\n::: {.column width=\"45%\"}\n![](img/packages-report-example.png)\n:::\n\n::: {.column width=\"10%\"}\n::: r-fit-text\n`>>>`\n:::\n:::\n\n::: {.column width=\"45%\"}\n&nbsp; file salad <br> \n&nbsp; + an out of date README\n:::\n:::\n\n## Good enough practices in scientific computing\n\n::: {.columns .v-center-container}\n::: {.column width=\"45%\"}\n![](img/airplane-duct.png)\n:::\n\n::: {.column width=\"2%\"}\n:::\n\n::: {.fragment .column width=\"53%\"}\n*PLOS Computational Biology*\n\nWilson, Bryan, Cranston, Kitzes, Nederbragt, Teal  (2017)\n\n\n<https://doi.org/10.1371/journal.pcbi.1005510>\n\n\n<http://bit.ly/good-enuff>\n:::\n:::\n\n# Practical Example\n\n## Your R installation\n\n::: {.fragment fragment-index=\"1\"}\n**R packages**\n\n-   the natural unit for distributing R code\n:::\n\n::: {.fragment fragment-index=\"2\"}\n**base R**\n\n-   14 base + 15 recommended packages\n\n-   ships with all binary distributions of R\n:::\n\n::: {.fragment fragment-index=\"3\"}\n**For example, have you used lattice recently?** ü§∑\n\n-   it came with your R installation, can use out of the box\n\n-   `library(lattice)`\n:::\n\n## Additional packages\n\n<br>\n\n::: {.columns}\n::: {.column width=\"40%\"}\n\n**CRAN, \\~20k packages**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install from CRAN\ninstall.packages(\"devtools\")\n# attach\nlibrary(devtools)\n```\n:::\n\n:::\n\n::: {.column width=\"2%\"}\n:::\n\n::: {.column .fragment width=\"58%\"}\n\n**GitHub, ??? packages**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install via devtools\ndevtools::install_github(\"rstats-wtf/wtfdbg\")\n# attach\nlibrary(wtfdbg)\n```\n:::\n\n:::\n:::\n\n\n::: footer\nwe'll use `wtfdbg` later in *Debugging*\n:::\n\n## Where do packages live locally?\n\n<br>\n\nBy default, in the default library\n\n`.Library`\n\n<br>\n\nAll libraries for the current session\n\n`.libPaths()`\n\n<br>\n\nAll installed packages\n\n`installed.packages()`\n\n## Syntax aside: pipes\n\n-   2014+ magrittr pipe `%>%`\n\n-   2021+ (R $\\geq$ 4.1.0) native R pipe `|>`\n\n2022 Isabella Vel√°squez Understanding the native R pipe \\|\\> <https://ivelasq.rbind.io/blog/understanding-the-r-pipe/>\n\n. . .\n\n<brshort>\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nwhatever(arg1, arg2, arg3, ...)\narg1 |>  \n  whatever(arg2, arg3)\n```\n:::\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(0:10)\n0:10 |> \n  mean()\n```\n:::\n\n:::\n:::\n\n::: footer\nChange `CTRL + Shift + M` shortcut to native pipe:\n\n`Tools -> Global Options -> Code ->`\n\n¬†¬† `Editing -> check Use Native Pipe Operator`\n:::\n\n## Syntax aside: namespacing\n\n`dplyr::select()`\n\n-   tells R explicitly to use the function `select` from the package `dplyr`\n\n-   can help to avoid name conflicts (e.g., `MASS::select()`)\n\n-   does not require `library(dplyr)`\n\n. . .\n\n::: columns\n::: {.column width=\"45%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nselect(mtcars, mpg, cyl) \nmtcars |>  \n  select(mpg, cyl) \n```\n:::\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(dplyr) not needed\ndplyr::select(mtcars, mpg, cyl) \nmtcars |>  \n  dplyr::select(mpg, cyl) \n```\n:::\n\n:::\n:::\n\n## üßê Explore your R installation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"usethis\")\nlibrary(usethis)\n# saves project on desktop by default for most users\nuse_course(\"rstats-wtf/wtf-explore-libraries\")\n# use_course(\"rstats-wtf/wtf-explore-libraries\", destdir = \"my/new/location\")\n# can alternatively download from \n# https://github.com/rstats-wtf/wtf-explore-libraries\n```\n:::\n\n\n\n::: {.small}\nRead the `README.md` to get started.\n\n* `01_explore-libraries_spartan.R` <br> (directions to explore without suggested code)\n\n* `01_explore-libraries_comfy.R`<br> (directions to explore with suggested code)\n\n* `01_explore-libraries_solution.R`<br> (directions to explore with code solutions)\n:::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_0a46b752\" data-update-every=\"1\" data-play-sound=\"true\" tabindex=\"0\" style=\"right:0;bottom:30%;font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n\n# Project-oriented workflows\n\n## Adopt a project-oriented workflow\n\n<br>\n\n::: columns\n::: {.column width=\"48%\"}\n### Why\n\n-   work on more than 1 thing at a time\n\n-   collaborate, communicate, distribute\n\n-   start and stop\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column .fragment width=\"48%\"}\n### How\n\n-   dedicated directory\n\n-   RStudio <ins>**P**</ins>roject\n\n-   Git repo, probably syncing to a remote\n:::\n:::\n\n## If the top of your script is\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd(\"C:\\Users\\jenny\\path\\that\\only\\I\\have\")\nrm(list = ls())\n```\n:::\n\n\n<br>\n\nJenny will come into your your office and SET YOUR COMPUTER ON FIRE üî•.\n\n<br>\n\n::: {.fragment fragment-index=\"1\"}\nProject-oriented workflow designs this away.\nüôå\n:::\n\n::: footer\n<https://twitter.com/hadleywickham/status/940021008764846080>\n\n<https://www.tidyverse.org/articles/2017/12/workflow-vs-script/>\n\n<https://rstats.wtf/project-oriented-workflow.html>\n:::\n\n## Which persist after rm(list = ls())?\n\n| Option                               | Persists?                                      |\n|-------------------------------------------------------|-----------------|\n| A. library(dplyr)                    | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| B. summary \\<- head                  | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 384 512\" style=\"height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>`{=html} |\n| C. options(stringsAsFactors = FALSE) | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| D. Sys.setenv(LANGUAGE = \"fr\")        | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| E. x \\<- 1:5                         | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 384 512\" style=\"height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>`{=html} |\n| F. attach(iris)                      | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#343838;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_caa232e5\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n## Which persist after rm(list = ls())?\n\n| Option                               | Persists?                                    |\n|-------------------------------------------------------|-----------------|\n| A. library(dplyr)                    | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| B. summary \\<- head                  | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 384 512\" style=\"height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>`{=html} |\n| C. options(stringsAsFactors = FALSE) | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| D. Sys.setenv(LANGUAGE = \"fr\")        | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n| E. x \\<- 1:5                         | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 384 512\" style=\"height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>`{=html} |\n| F. attach(iris)                      | `<svg aria-hidden=\"true\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#C7B41D;overflow:visible;position:relative;\"><path d=\"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\"/></svg>`{=html} |\n\n## What does it mean to be an RStudio <ins>**P**</ins>roject?\n\n<br>\n\nRStudio leaves notes to itself in foo.Rproj\n\n. . .\n\n<br>\n\nOpen Project = dedicated instance of RStudio\n\n-   dedicated R process\n\n-   file browser pointed at Project directory\n\n-   working directory set to Project directory\n\n## Many projects open\n\n<br>\n\n![](img/many-projects.jpg)\n\n## Use a \"blank slate\"\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nusethis::use_blank_slate()\n```\n:::\n\n\n<br>\n\nOR\n\n<br>\n\nTools -\\> Global Options\n\n![](img/workspace.PNG)\n\n## Restart R often\n\n<br>\n\n::: columns\n::: {.column width=\"48%\"}\nSession -\\> Restart R\n\n![](img/restart.jpg)\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column width=\"48%\"}\nWindows\n\n-   Ctrl + Shift + F10\n\nMac\n\n-   Cmd + Shift + 0\n\n-   Cmd + Shift + F10\n:::\n:::\n\n## Project initiation: the local case \n\n1.  New folder + make it an RStudio Project\n\n* `usethis::create_project(\"~/i_am_new\")`\n\n* File -\\> New Project -\\> New Directory -\\> New Project\n\n. . .\n\n2.  Make existing folder into an RStudio Project\n\n* `usethis::create_project(\"~/i_exist\")`\n\n* File -\\> New Project -\\> Existing Directory\n\n. . .\n\n::: question\nTry option 2 now for wtf-explore-libraries.\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_9a2503d2\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n# Safe paths\n\n##  {background-image=\"img/deep_thoughts.PNG\"}\n\n## On reproducibility of code\n\n::: columns\n::: {.column width=\"50%\"}\n![](img/kieran-healy-setwd.PNG)\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column width=\"46%\"}\n<br> A large-scale study on research code quality and execution.\n<br> Trisovic, A., Lau, M.K., Pasquier, T.\net al. <br> *Sci Data* **9**, 60 (2022).\n:::\n:::\n\n::: footer\n<https://twitter.com/kjhealy/status/1514169782060429320> <br> <https://doi.org/10.1038/s41597-022-01143-6>\n:::\n\n\n## Do you know where<br> your files are?\n\n![](img/street-sign.png)\n\n\n::: notes\nWorking directory is associated with a specific process or running application.\n\nFor a newly launched process or application instance, the working directory (probably? usually?) defaults to user's home directory.\nOr perhaps the application consults a config file to set the working directory at launch time.\nThis is sort of how I would describe launching an RStudio Project.\n\n\"Working directory\" as a concept is not comparable to \"home directory\".\n\"Home directory\" is a static, persistent thing.\n:::\n\n## Practice \"safe paths\"\n\n<br>\n\nrelative to a [stable base]{.important}\n\n<br>\n\nuse [file system functions]{.important}\n\n¬† ¬† not paste(), strsplit(), etc.\n\n\n## Packages with file system functions\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"fs\")\n```\n:::\n\n\n`fs` = file path handling\n\n<br>\n\n. . .\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"here\")\n```\n:::\n\n\n`here` = project-relative paths\n\n## Examples of a stable base\n\n<brshort>\n\nProject directory\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhere::here(\"data\", \"raw-data.csv\")\nhere::here(\"data/raw-data.csv\")\n```\n:::\n\n\n*Automatically complete paths with `Tab`.*\n\n<brshort>\n\n. . .\n\nUser's home directory\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfile.path(\"~\", ...)\nfs::path_home(...)\n```\n:::\n\n\n. . .\n\n<brshort>\n\nOfficial location for installed software\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(thingy)\nsystem.file(..., package = \"thingy\")\n```\n:::\n\n\n*See example in [gapminder readme](https://github.com/jennybc/gapminder#plain-text-delimited-files).*\n\n::: notes\nsee where tilde goes with fs::path_expand(file.path(\"\\~\"))\n:::\n\n## Absolute paths\n\nI have nothing against absolute paths.\n\nSome of my best friends are absolute paths!\n\nBut don't hard-wire them into your scripts.\n\nInstead, form at runtime relative to a [stable base]{.important}\n\n<brshort>\n\n\n::: {.cell}\n\n```{.r .cell-code}\n> (BAD <- \"/Users/shannon/tmp/test.csv\")\n[1] \"/Users/shannon/tmp/test.csv\"\n```\n:::\n\n\n. . .\n\n<brshort>\n\n\n::: {.cell}\n\n```{.r .cell-code}\n> (GOOD <- fs::path_home(\"tmp/test.csv\")\n[1] \"/Users/shannon/tmp/test.csv\"\n```\n:::\n\n\n## Practice safe paths\n\n::: columns\n::: {.column width=\"50%\"}\n![](img/here.png)\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column .fragment width=\"46%\"}\n-   Use the `here` package to build paths inside a project.\n\n-   Leave working directory at top-level at all times, during development.\n\n-   Absolute paths are formed at runtime.\n:::\n:::\n\n::: footer\nArtwork by [\\@allison_horst](https://twitter.com/allison_horst).\n:::\n\n## here example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(here::here(\"figs\", \"built-barchart.png\"))\n```\n:::\n\n\n-   Works on my machine, works on yours!\n\n-   Works even if working directory is in a sub-folder.\n\n-   Works for RStudio <ins>**P**</ins>rojects, Git repos, R packages, etc.\n\n-   Works with knitr / rmarkdown.\n\n## here::here()\n\nThe `here` package is designed to work inside a project, where that could mean:\n\n-   RStudio <ins>**P**</ins>roject\n\n-   Git repo\n\n-   R package\n\n-   Folder with a file named .here\n\n`here::here()` does not create directories; that's your job.\n\n## Kinds of paths\n\nAbsolute path.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- read.csv(\"C:/Users/pileggis/Documents/wtf-fix-paths/data/installed-packages.csv\")\n```\n:::\n\n\n<br>\n\nRelative path to working directory, established by the RStudio <ins>**P**</ins>roject.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- read.csv(\"data/installed-packages.csv\")\n```\n:::\n\n\n<br>\n\nRelative path within the RStudio <ins>**P**</ins>roject directory.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndat <- read.csv(here::here(\"data/installed-packages.csv\"))\n```\n:::\n\n\n## Your turn\n\n<br>\n\nPractice calling `here::here()` in a project <br> to get a feel for it.\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(usethis)\n# saves project on desktop by default for most users\nuse_course(\"rstats-wtf/wtf-fix-paths\")\n# use_course(\"rstats-wtf/wtf-fix-paths\", destdir = \"my/new/location\")\n# can alternatively download from \n# https://github.com/rstats-wtf/wtf-fix-paths\n```\n:::\n\n\n<br> Read the `README.md` to get started.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_a9af7ce6\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n\n## What if my data can't live in my project directory? {.smaller}\n\n1. Are you sure it can't?\n\n2. Review the Good Enough Practices paper for tips.\n\n3. Create a symbolic link to access the data. ([fs::link_create()](https://fs.r-lib.org/reference/create.html), [fs::link_path()](https://fs.r-lib.org/reference/create.html))\n\n4. Put the data in an [R package](https://r-pkgs.org/data.html).\n\n5. Use [pins](https://pins.rstudio.com/).\n\n6. Explore other data warehousing options.\n\nRStudio Community threads:\n\n* [Project-oriented workflow; setwd(), rm(list = ls()) and computer fires](https://community.rstudio.com/t/project-oriented-workflow-setwd-rm-list-ls-and-computer-fires/3549/1)\n\n* [Best way to define paths for a file running on a cron?](https://community.rstudio.com/t/best-way-to-define-paths-for-a-file-running-on-a-cron/2061/7)\n\n\n\n# Names matter\n\n##  {background-image=\"img/deep_thoughts.PNG\"}\n\n## \n\n\n::: {.columns .v-center-container}\n\n::: {.column .small .hand width=\"60%\"}\n‚ÄôTis but thy name that is my enemy;<br>\nThou art thyself, though not a Montague.<br>\nWhat‚Äôs Montague? It is nor hand, nor foot,<br>\nNor arm, nor face, nor any other part<br>\nBelonging to a man. O, be some other name!<br>\n[What‚Äôs in a name? That which we call a rose]{.important}<br>\n[By any other name would smell as sweet;]{.important}<br>\nSo Romeo would, were he not Romeo call‚Äôd,<br>\nRetain that dear perfection which he owes<br>\nWithout that title. Romeo, doff thy name;<br>\nAnd for thy name, which is no part of thee,<br>\nTake all myself.\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column .fragment .center-x width=\"35%\"}\nThis\n\nis\n\n[not]{.important}\n\n[true]{.important}\n\nfor \n\nfile \n\nnames.\n:::\n:::\n\n\n\n::: footer\nFrom Danielle Navarro's _Project Structure_ slides\n\n<https://slides.djnavarro.net/>\n:::\n\n## Names matter\n\n\n\n<br>\n\nmachine readable\n\n<br>\n\nhuman readable\n\n<br>\n\nsort nicely\n\n## \n\n::: question\nWhat features differentiate üòî vs üòç?\n:::\n\n::: columns\n::: {.column width=\"10%\"}\n<br>\n\n::: r-fit-text\nüòî\n:::\n\n<br>\n\n<br>\n\n\n::: r-fit-text\nüòç\n:::\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column .small width=\"86%\"}\nmyabstract.docx\n\nJoe's Filenames Use Spaces and Punctuation.xlsx\n\nfigure 1.png\n\nhomework1.R\n\nJW7d\\^(2sl\\@deletethisandyourcareerisoverWx2\\*.txt\n\n<br>\n\n2018-01_bryan-abstract-rstudio-conf.docx\n\njoes-filenames-are-getting-better.xlsx\n\nfig01_scatterplot-talk-length-vs-interest.png\n\nbryan_hw01.R\n\n1986-01-28_raw-data-from-challenger-o-rings.txt\n:::\n\n\n\n\n:::\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_ceff8dcc\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n## Names machines like {.smaller}\n\n1.  don't leave white space\n\n. . .\n\n2.  use letters, numbers, hyphens and underscores... that's it <br> (characters like \\^.\\*?+\\|\\$ can have a special meaning)\n\n. . .\n\n3.  be consistent with case <br> (some operating systems treat a and A the same, some differently).\n\n. . .\n\n4.  use separator characters wisely\n\n¬† ¬† use underscore `_` to separate different chunks\n\n¬† ¬† use hyphen `-` for words in the same chunk\n\n. . .\n\n<br>\n\nThis creates names that are regular expression and globbing friendly, and easy to compute on!\nüéâ\n\n::: footer\nAdapted from <br> <https://djnavarro.net/slides-project-structure/#1>.\n:::\n\n## Names humans like\n\n<br>\n\nname contains info on content\n\nname anticipates context\n\nconcept of a slug üêå from user-friendly URLs\n\n-   1986-01-28\\_`raw-data-from-challenger-o-rings`.txt\n\n-   concise, meaningful description\n\n-   usually appended to the end\n\n::: notes\nNote: A URL slug is the part of the URL after the last backslash - important for keyword SEO\n:::\n\n## Names that sort nicely\n\n<br>\n\nput something numeric in there\n\nleft pad with zeros for constant width, nice sorting, `01`\n\nuse the ISO 8601 standard for dates, `YYYY-MM-DD`\n\norder = chronological or ... consider common sense\n\n## ISO 8601\n\n::: {.columns .v-center-container}\n::: {.column width=\"40%\"}\n![](img/jenny-chicken-broth.PNG)\n:::\n\n::: {.column width=\"4%\"}\n:::\n\n::: {.column width=\"56%\"}\n::: r-fit-text\nYYYY-MM-DD\n\nISO 8601\n:::\n\n<https://www.iso.org/iso-8601-date-and-time-format.html>\n:::\n:::\n\n::: footer\n<https://twitter.com/JennyBryan/status/816143967695687684>\n:::\n\n## üëç file names {.center-x}\n\n![](img/file-names-01.png)\n\n. . .\n\nAnyone can guess at file's purpose\n\n\n## üëç file names {.center-x}\n\n![](img/file-names-02.png)\n\n\nEasy to filter in R (or the shell or whatever)\n\n\n## üëç file names {.center-x}\n\n![](img/file-names-03.png)\n\nIntentional delimiters means meta-data is easily recovered.\n\n`_` delimits fields; `-` delimits words\n\n\n## üëç file names {.center-x}\n\n![](img/file-names-04.png)\n\nSorts in the same order as you <br> experience in real life.\n\n\n## Names matter\n\n<br>\n\nmachine readable, human readable, and sort nicely\n\n<br>\n\n. . .\n\neasy to implement NOW\n\n<br>\n\npayoffs accumulate as your skills evolve and <br> projects get more complex\n\n# Project structure\n\n## Break logic and output into pieces\n\n![](img/monolith.jpg)\n\n## Process\n\n![](img/process-naked.jpg)\n\n::: footer\n<https://r4ds.had.co.nz/introduction.html#what-you-will-learn>\n:::\n\n## Project code\n\n\n::: {.columns .v-center-container}\n::: {.column  width=\"30%\"}\nsmell.test.R\n\nwrangle.R\n\nmodel.R\n\nmake-figs.R\n\nreport.Rmd\n:::\n\n::: {.column width=\"10%\" }\n\n\n::: r-fit-text\n`>>>`\n:::\n\n:::\n\n::: {.column  width=\"35%\"}\n&nbsp;&nbsp;&nbsp; everything.R\n:::\n:::\n\n## Process and code\n\n![](img/process-script.jpg)\n\n## Project artifacts\n\n::: {.columns .v-center-container}\n::: {.column width=\"30%\"}\nraw-data.xlsx\n\ndata.csv\n\nfit.rds\n\nests.csv\n:::\n\n::: {.column width=\"10%\"}\n\n::: r-fit-text\n`>>>`\n:::\n:::\n\n::: {.column .center-x width=\"30%\"}\n\n\n.Rdata\n:::\n:::\n\n## Process and artifacts\n\n![](img/process-out.jpg)\n\n## A humane API for analysis\n\n![](img/input-code-output.jpg)\n\n## Your turn\n\n<br>\n\nCreate a report that adheres to project organization strategies.\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(usethis)\n# saves project on desktop by default for most users\nuse_course(\"rstats-wtf/wtf-packages-report\")\n# use_course(\"rstats-wtf/wtf-packages-report\", destdir = \"my/new/location\")\n# can alternatively download from \n# https://github.com/rstats-wtf/wtf-packages-report\n```\n:::\n\n\n<br> Read the `README.md` to get started.\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_4695a886\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}